code


#include <Keypad.h>
#include <LiquidCrystal_I2C.h>
#include <Servo.h>

#define PASSWORD_LENGTH 5

LiquidCrystal_I2C lcd(0x27, 16, 2);
Servo servo;

const byte ROWS = 4, COLS = 4;
char keys[ROWS][COLS] = {
  {'1', '2', '3', 'A'},
  {'4', '5', '6', 'B'},
  {'7', '8', '9', 'C'},
  {'*', '0', '#', 'D'}
};

byte rowPins[ROWS] = {0, 1, 2, 3};
byte colPins[COLS] = {4, 5, 6, 7};
Keypad keypad = Keypad(makeKeymap(keys), rowPins, colPins, ROWS, COLS);

const char correctPassword[PASSWORD_LENGTH] = "1111";
char inputPassword[PASSWORD_LENGTH];
byte index = 0;

bool doorOpen = false;
int buzzer = 8;

void setup() {
  lcd.init();
  lcd.backlight();
  servo.attach(9);
  pinMode(buzzer, OUTPUT);
  
  lcd.setCursor(0, 0);
  lcd.print("Protected Door");
  delay(2000);
  lcd.clear();
  lockDoor();
}

void loop() {
  if (!doorOpen) {
    lcd.setCursor(0, 0);
    lcd.print("Enter Password:");
    
    char key = keypad.getKey();
    if (key && index < PASSWORD_LENGTH - 1) {
      inputPassword[index++] = key;
      lcd.setCursor(index - 1, 1);
      lcd.print("*");
    }
    
    if (index == PASSWORD_LENGTH - 1) {
      inputPassword[index] = '\0';
      checkPassword();
    }
  } else {
    lcd.setCursor(0, 0);
    lcd.print("Press # to Lock");
    
    if (keypad.getKey() == '#') {
      lockDoor();
    }
  }
}

void checkPassword() {
  lcd.clear();
  if (strcmp(inputPassword, correctPassword) == 0) {
    lcd.print("Access Granted");
    openDoor();
    tone(buzzer, 1000, 1000);
    delay(3000);
    doorOpen = true;
  } else {
    lcd.print("Access Denied");
    tone(buzzer, 1500, 1000);
    delay(2000);
  }
  clearInput();
  lcd.clear();
}

void clearInput() {
  index = 0;
  memset(inputPassword, 0, PASSWORD_LENGTH);
}

void openDoor() {
  for (int pos = 0; pos <= 90; pos += 10) {
    servo.write(pos);
    delay(15);
  }
}

void lockDoor() {
  for (int pos = 90; pos >= 0; pos -= 10) {
    servo.write(pos);
    delay(15);
  }
  lcd.clear();
  lcd.print("Door Locked");
  delay(2000);
  lcd.clear();
  doorOpen = false;
}
